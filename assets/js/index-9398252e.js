import{_ as C,g as x}from"./UserDrawer.vue_vue_type_script_setup_true_name_UserDrawer_lang-bfd13d3b.js";import{u as F}from"./useHandleData-e7ff85db.js";import{_ as $}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-8d30c8ae.js";import{T as E}from"./index-bdc9888e.js";import{I}from"./index-826c336c.js";import{d as T,T as N,ac as g,i as n,R as v,r as P,o as U,c as L,b as t,a as D,w as o,u as i,a0 as M,e as c,aT as R,a1 as V,a2 as B,P as q,F as H}from"./index-63c25652.js";import{g as S,f as A,d as G,h as K,i as j,c as z}from"./user-1f4494de.js";import"./Imgs-97882310.js";import"./upload-e5aca4eb.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./sortable.esm-aea8cdfd.js";const J={class:"main-box"},O={class:"table-box"},Q=T({name:"treeProTable"}),de=T({...Q,setup(W){N(()=>{w(),g({title:"温馨提示",message:"该页面 ProTable 数据不会自动请求，需等待 treeFilter 数据请求完成之后，才会触发表格请求。",type:"info",duration:1e4}),setTimeout(()=>{g({title:"温馨提示",message:"该页面 ProTable 性别搜索框为远程数据搜索，详情可查看代码。",type:"info",duration:1e4})},0)});const d=n(),u=v({departmentId:""}),p=n([]),w=async()=>{const{data:e}=await S();p.value=e,u.departmentId=p.value[1].id},y=e=>{q.success("请注意查看请求参数变化 🤔"),d.value.pageable.pageNum=1,u.departmentId=e},m=n(!1),f=n([]),h=v([{type:"index",label:"#",width:80},{prop:"username",label:"用户姓名"},{prop:"gender",label:"性别",sortable:!0,isFilterEnum:!1,enum:f,search:{el:"select",props:{placeholder:"请输入性别查询",filterable:!0,remote:!0,reserveKeyword:!0,loading:m,remoteMethod:e=>{f.value=[],e&&(m.value=!0,setTimeout(()=>{m.value=!1,f.value=x.filter(a=>a.label.includes(e))},500))}}},render:e=>t(H,null,[e.row.gender===1?"男":"女"])},{prop:"idCard",label:"身份证号"},{prop:"email",label:"邮箱"},{prop:"address",label:"居住地址"},{prop:"status",label:"用户状态",sortable:!0,tag:!0,enum:z,search:{el:"tree-select"},fieldNames:{label:"userLabel",value:"userStatus"}},{prop:"createTime",label:"创建时间",width:180},{prop:"operation",label:"操作",width:300,fixed:"right"}]),k=async e=>{var a;await F(G,{id:[e.id]},`删除【${e.username}】用户`),(a=d.value)==null||a.getTableList()},b=n(null),_=(e,a={})=>{var r,s;const l={title:e,row:{...a},isView:e==="查看",api:e==="新增"?K:e==="编辑"?j:void 0,getTableList:(r=d.value)==null?void 0:r.getTableList};(s=b.value)==null||s.acceptParams(l)};return(e,a)=>{const l=P("el-button");return U(),L("div",J,[t(E,{label:"name",title:"部门列表(单选)",data:p.value,"default-value":u.departmentId,onChange:y},null,8,["data","default-value"]),D("div",O,[t($,{ref_key:"proTable",ref:d,"row-key":"id",indent:20,columns:h,"request-api":i(A),"request-auto":!1,"init-param":u,"search-col":{xs:1,sm:1,md:2,lg:3,xl:3}},{tableHeader:o(()=>[t(l,{type:"primary",icon:i(M),onClick:a[0]||(a[0]=r=>_("新增"))},{default:o(()=>[c("新增用户")]),_:1},8,["icon"])]),operation:o(r=>[t(l,{type:"primary",link:"",icon:i(R),onClick:s=>_("查看",r.row)},{default:o(()=>[c("查看")]),_:2},1032,["icon","onClick"]),t(l,{type:"primary",link:"",icon:i(V),onClick:s=>_("编辑",r.row)},{default:o(()=>[c("编辑")]),_:2},1032,["icon","onClick"]),t(l,{type:"primary",link:"",icon:i(B),onClick:s=>k(r.row)},{default:o(()=>[c("删除")]),_:2},1032,["icon","onClick"])]),_:1},8,["columns","request-api","init-param"]),t(C,{ref_key:"drawerRef",ref:b},null,512),t(I,{ref:"dialogRef"},null,512)])])}}});export{de as default};
